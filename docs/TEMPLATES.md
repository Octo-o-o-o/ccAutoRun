# 任务模板库 📋

> 常见任务的执行计划模板，复制并调整即可使用

## 📖 目录

- [开发任务模板](#开发任务模板)
  - [添加新功能](#1-添加新功能)
  - [重构代码](#2-重构代码)
  - [修复Bug](#3-修复bug)
  - [性能优化](#4-性能优化)
- [测试任务模板](#测试任务模板)
  - [添加测试框架](#5-添加测试框架)
  - [提升测试覆盖率](#6-提升测试覆盖率)
- [文档任务模板](#文档任务模板)
  - [编写项目文档](#7-编写项目文档)
  - [生成API文档](#8-生成api文档)
- [部署任务模板](#部署任务模板)
  - [配置CI/CD](#9-配置cicd)
  - [容器化部署](#10-容器化部署)

---

## 开发任务模板

### 1. 添加新功能

**适用场景**: 为项目添加新功能模块

**模板提示词**（在Claude Code中使用`/plan`）:
```
/plan 为项目添加[功能名称]功能

需求：
1. [具体功能描述]
2. [技术栈要求，如使用React Hooks、TypeScript等]
3. [UI/UX要求]
4. [性能要求]
5. [需要编写单元测试]

参考实现：[可选：提供参考链接或类似功能]
```

**示例**:
```
/plan 为电商项目添加购物车功能

需求：
1. 用户可以添加/删除商品到购物车
2. 使用React + Redux管理购物车状态
3. 购物车数据持久化到localStorage
4. 实时计算总价和优惠
5. 编写单元测试和集成测试

参考实现：类似Amazon的购物车体验
```

**预期输出结构**:
```
Stage 1: 数据模型和状态管理
Stage 2: UI组件开发
Stage 3: 业务逻辑实现
Stage 4: 持久化和性能优化
Stage 5: 测试编写
```

---

### 2. 重构代码

**适用场景**: 改善代码结构和质量，不改变外部行为

**模板提示词**:
```
/plan 重构[模块名称]

目标：
1. [重构目标，如提升可维护性、降低复杂度]
2. [使用的设计模式或架构]
3. [是否需要保持向后兼容]
4. [重构范围：哪些文件/模块]

约束：
- 保持所有现有测试通过
- 不改变外部API
- 增量重构，可回滚
```

**示例**:
```
/plan 重构用户认证模块

目标：
1. 将单体auth.js拆分为独立的职责模块
2. 使用依赖注入替代全局变量
3. 保持向后兼容，不破坏现有API
4. 重构范围：src/auth/目录下所有文件

约束：
- 保持146个现有测试全部通过
- 不改变对外暴露的函数签名
- 每个Stage完成后运行测试验证
```

**预期输出结构**:
```
Stage 1: 分析现有代码结构和依赖关系
Stage 2: 创建新的模块架构（不破坏旧代码）
Stage 3: 迁移核心功能到新架构
Stage 4: 更新测试和文档
Stage 5: 移除旧代码，清理
```

---

### 3. 修复Bug

**适用场景**: 修复已知Bug或问题

**模板提示词**:
```
/plan 修复Bug：[Bug简短描述]

问题描述：
1. [Bug的详细症状]
2. [重现步骤]
3. [预期行为 vs 实际行为]
4. [相关错误日志或截图]

分析：
- [初步原因分析，如果有的话]
- [影响范围]
- [紧急程度]

要求：
- 修复根本原因，不是症状
- 添加回归测试防止再次出现
```

**示例**:
```
/plan 修复Bug：用户登录后Session过早失效

问题描述：
1. 用户登录成功后，5分钟内就被强制退出
2. 重现：登录 → 浏览3个页面 → 第4个页面时显示"Session expired"
3. 预期：登录后至少保持30分钟活跃Session
4. 错误日志：见attached error.log

分析：
- 怀疑是Session过期时间配置错误或Session刷新逻辑问题
- 影响所有登录用户
- 优先级：高

要求：
- 修复Session管理逻辑
- 添加Session过期时间的单元测试
- 验证修复后30分钟内不会失效
```

**预期输出结构**:
```
Stage 1: 问题定位和根因分析
Stage 2: 实施修复方案
Stage 3: 添加回归测试
Stage 4: 验证和代码审查
```

---

### 4. 性能优化

**适用场景**: 提升应用性能、响应速度或资源使用

**模板提示词**:
```
/plan 性能优化：[优化目标]

当前问题：
1. [性能指标现状，如加载时间3秒]
2. [性能瓶颈位置]
3. [性能分析报告，如Lighthouse报告]

优化目标：
1. [具体性能目标，如加载时间<1秒]
2. [优化范围]
3. [优先级排序]

约束：
- 不改变功能行为
- 保持代码可读性
- 提供性能对比数据
```

**示例**:
```
/plan 性能优化：首页加载速度

当前问题：
1. 首页加载时间：平均3.5秒（Lighthouse分数45）
2. 瓶颈：大量未优化图片、无代码分割、过多同步请求
3. 见attached lighthouse-report.html

优化目标：
1. 首页加载时间<1.5秒（Lighthouse分数>85）
2. 优化范围：首页及核心路径
3. 优先级：图片优化 > 代码分割 > API优化

约束：
- 不改变首页UI/UX
- 保持SEO友好
- 提供优化前后对比报告
```

**预期输出结构**:
```
Stage 1: 性能基线测试和瓶颈分析
Stage 2: 图片优化（lazy loading, WebP, CDN）
Stage 3: 代码分割和按需加载
Stage 4: API和网络优化
Stage 5: 性能验证和对比报告
```

---

## 测试任务模板

### 5. 添加测试框架

**适用场景**: 为项目引入测试框架或测试体系

**模板提示词**:
```
/plan 为项目添加[测试框架名称]测试框架

需求：
1. [测试类型：单元测试/集成测试/E2E测试]
2. [测试框架选择：vitest/jest/cypress/playwright]
3. [测试覆盖率目标：如80%]
4. [CI/CD集成要求]

范围：
- [需要测试的模块]
- [测试策略和优先级]
```

**示例**:
```
/plan 为React项目添加vitest单元测试框架

需求：
1. 测试类型：单元测试 + React组件测试
2. 使用vitest + @testing-library/react
3. 测试覆盖率目标：>80%（核心模块>90%）
4. 集成到GitHub Actions CI

范围：
- 核心业务逻辑（utils/, services/）
- React组件（components/）
- Redux store和reducers
- 测试策略：先核心模块，再UI组件
```

**预期输出结构**:
```
Stage 1: 配置vitest和测试工具链
Stage 2: 编写核心模块单元测试
Stage 3: 编写组件测试
Stage 4: 配置覆盖率报告
Stage 5: CI集成和文档
```

---

### 6. 提升测试覆盖率

**适用场景**: 为现有项目增加测试，提高覆盖率

**模板提示词**:
```
/plan 提升项目测试覆盖率

当前状态：
1. [当前覆盖率：如45%]
2. [未覆盖的关键模块]
3. [现有测试框架]

目标：
1. [目标覆盖率：如85%]
2. [优先覆盖的模块和原因]
3. [时间预算]

策略：
- 优先覆盖核心业务逻辑
- 优先覆盖复杂度高的模块
- 跳过简单的getter/setter
```

**示例**:
```
/plan 提升项目测试覆盖率从45%到85%

当前状态：
1. 当前覆盖率：45%（分支覆盖30%）
2. 未覆盖：支付模块（0%）、订单处理（20%）、用户权限（35%）
3. 现有框架：jest

目标：
1. 整体覆盖率：85%（分支覆盖70%）
2. 优先级：支付模块（最高风险） > 订单 > 权限
3. 预计3-4天完成

策略：
- 从风险最高的支付模块开始
- 使用测试覆盖率报告指导编写
- 每个模块完成后Review
```

**预期输出结构**:
```
Stage 1: 生成当前覆盖率报告和分析
Stage 2: 编写支付模块测试
Stage 3: 编写订单处理测试
Stage 4: 编写权限模块测试
Stage 5: 达标验证和文档
```

---

## 文档任务模板

### 7. 编写项目文档

**适用场景**: 为项目编写或完善文档

**模板提示词**:
```
/plan 编写项目文档

目标：
1. [文档类型：README/API文档/用户指南/开发者指南]
2. [目标受众]
3. [文档语言：中文/英文/双语]
4. [文档工具：Markdown/VuePress/Docusaurus]

内容范围：
- [必须包含的章节]
- [示例代码要求]
- [是否需要图表/截图]
```

**示例**:
```
/plan 编写完整的项目开发者文档

目标：
1. 文档类型：README + API文档 + 贡献指南
2. 目标受众：开源贡献者和新团队成员
3. 语言：中英文双语
4. 工具：Markdown + VuePress静态站点

内容范围：
- README：项目介绍、快速开始、核心概念
- API文档：所有公开API的详细说明和示例
- 贡献指南：代码规范、提交流程、测试要求
- 需要架构图和流程图
```

**预期输出结构**:
```
Stage 1: 规划文档结构和目录
Stage 2: 编写README和快速开始
Stage 3: 编写API文档（自动化生成+手写补充）
Stage 4: 编写贡献指南和开发指南
Stage 5: 配置VuePress和部署
```

---

### 8. 生成API文档

**适用场景**: 自动生成或完善API文档

**模板提示词**:
```
/plan 为项目生成API文档

需求：
1. [API类型：REST API/GraphQL/库API]
2. [文档工具：Swagger/TypeDoc/JSDoc]
3. [文档格式：Markdown/HTML/交互式]
4. [是否需要示例和教程]

范围：
- [需要文档化的API模块]
- [文档详细程度]
```

**示例**:
```
/plan 为Express REST API生成Swagger文档

需求：
1. API类型：REST API（40+个endpoint）
2. 使用Swagger/OpenAPI 3.0规范
3. 输出：交互式Swagger UI + 导出的JSON/YAML
4. 需要为每个endpoint提供请求/响应示例

范围：
- 所有 /api/* 路由
- 包含认证说明和错误码
- 详细程度：完整（参数、返回值、错误处理）
```

**预期输出结构**:
```
Stage 1: 配置Swagger工具链
Stage 2: 为现有API添加Swagger注解
Stage 3: 生成OpenAPI规范文档
Stage 4: 配置Swagger UI
Stage 5: 编写API使用教程
```

---

## 部署任务模板

### 9. 配置CI/CD

**适用场景**: 为项目配置持续集成和持续部署

**模板提示词**:
```
/plan 为项目配置CI/CD流程

需求：
1. [CI/CD平台：GitHub Actions/GitLab CI/Jenkins]
2. [流程需求：自动测试/自动构建/自动部署]
3. [部署目标：生产/预发布/开发环境]
4. [触发条件：PR/main分支/tag]

安全要求：
- [密钥管理]
- [权限控制]
- [部署审批流程]
```

**示例**:
```
/plan 为Node.js项目配置GitHub Actions CI/CD

需求：
1. 平台：GitHub Actions
2. 流程：
   - PR时：运行lint + test + build
   - main分支：自动部署到staging环境
   - 发布tag：自动部署到生产环境
3. 部署目标：AWS ECS（staging + production）
4. 通知：Slack通知

安全要求：
- 使用GitHub Secrets管理AWS凭证
- 生产部署需要手动approval
- 所有部署需要审计日志
```

**预期输出结构**:
```
Stage 1: 配置基础CI流程（lint, test, build）
Stage 2: 配置自动部署到staging
Stage 3: 配置生产部署流程（带approval）
Stage 4: 配置通知和监控
Stage 5: 编写CI/CD文档
```

---

### 10. 容器化部署

**适用场景**: 使用Docker容器化应用并部署

**模板提示词**:
```
/plan 容器化部署[应用名称]

需求：
1. [应用类型和技术栈]
2. [容器化方案：Docker/Docker Compose/Kubernetes]
3. [依赖服务：数据库/Redis/消息队列]
4. [部署环境：开发/生产]

优化目标：
- [镜像大小]
- [构建速度]
- [安全性]
```

**示例**:
```
/plan 容器化部署全栈应用（React + Node.js + PostgreSQL）

需求：
1. 前端：React + Nginx，后端：Node.js，数据库：PostgreSQL
2. 使用Docker Compose（开发）+ Kubernetes（生产）
3. 依赖：PostgreSQL, Redis（缓存）
4. 环境：开发+生产（双配置）

优化目标：
- 镜像大小<200MB（使用multi-stage build）
- 本地开发热重载支持
- 生产环境安全加固（非root用户、最小化镜像）
```

**预期输出结构**:
```
Stage 1: 编写Dockerfile（前端+后端）
Stage 2: 配置Docker Compose（本地开发）
Stage 3: 镜像优化和安全加固
Stage 4: 配置Kubernetes部署文件
Stage 5: 编写部署文档和脚本
```

---

## 🎯 如何使用模板

### 方法1：直接使用提示词
复制上面的"模板提示词"，在Claude Code中使用`/plan`命令，根据你的实际情况调整参数。

### 方法2：自定义调整
参考模板结构，根据你的项目特点修改：
- 调整Stage数量和划分
- 增减技术栈要求
- 调整优先级和约束

### 方法3：组合使用
复杂任务可以组合多个模板：
```
/plan 大型重构项目

结合以下模板：
- 重构代码（模板2）
- 添加测试框架（模板5）
- 性能优化（模板4）
- 编写文档（模板7）

分4个阶段完成...
```

## 💡 模板使用技巧

1. **具体化描述**: 越具体的需求，生成的计划越准确
2. **提供上下文**: 告诉Claude你的技术栈、项目规模、团队经验
3. **明确约束**: 说明时间、质量、兼容性等约束条件
4. **迭代优化**: 第一次生成的计划可能需要Review和调整
5. **保存成功经验**: 对于成功的计划，保存为你自己的模板

## 🔗 相关文档

- **[Quick Start](QUICK_START.md)** - 快速开始使用ccAutoRun
- **[FAQ](FAQ.md)** - 常见问题解答
- **[主文档](../README.md)** - 完整功能文档

---

**贡献模板**: 如果你有好的任务模板，欢迎提交PR！
**[← 返回主页](../README.md)** | **[查看FAQ →](FAQ.md)**

# Stage 4: AIè®¡åˆ’ç”Ÿæˆç³»ç»Ÿ - Slashå‘½ä»¤æ ¸å¿ƒ ğŸ”„

**[â† è¿”å›ä¸»è®¡åˆ’](../../EXECUTION_PLAN.md)** | **[â† Stage 3](stage-3.md)** | **[Stage 5 â†’](stage-5.md)**

---

## ğŸ“‹ é˜¶æ®µä¿¡æ¯

- **é˜¶æ®µç¼–å·**: Stage 4
- **é¢„è®¡æ—¶é—´**: 8-10å°æ—¶
- **ä¾èµ–**: Stage 3
- **çŠ¶æ€**: â³ å¾…å¼€å§‹

### ğŸ¯ ç›®æ ‡
å®ç° `/plan` Slashå‘½ä»¤ï¼Œç”Ÿæˆ**æ‹†åˆ†æ¶æ„**çš„æ‰§è¡Œè®¡åˆ’ï¼Œè¿™æ˜¯æ•´ä¸ªç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½

### ğŸ“ ä»»åŠ¡æ¸…å•

#### 4.1 æ ¸å¿ƒ Slash å‘½ä»¤
- [ ] åˆ›å»º `.claude/commands/plan.md`ï¼ˆæ”¯æŒæ¶æ„é€‰æ‹©å‚æ•°å’Œæ¨¡æ¿ï¼‰
  - **Phase 0: å‚æ•°è§£æ**ï¼ˆç›´æ¥åœ¨ slash command ä¸­å¤„ç†ï¼‰
    - ç›´æ¥è§£æç”¨æˆ·è¾“å…¥ä¸­çš„æ¶æ„å‚æ•°ï¼š
      - `--architecture auto|split|single`
      - `--force-split` (ç­‰åŒäº --architecture split)
      - `--force-single` (ç­‰åŒäº --architecture single)
      - `--template <name>` (ä½¿ç”¨æ¨¡æ¿)
    - å¦‚æœæœªæŒ‡å®šï¼Œä»config.yamlè¯»å–default_architectureï¼ˆä½¿ç”¨ Read å·¥å…·ï¼‰
    - è®°å½•æ¶æ„é€‰æ‹©æ¨¡å¼ï¼ˆauto/split/singleï¼‰
    - æä¾›æ˜ç¡®æŒ‡ä»¤ç»™ AIï¼Œé¿å…è¯¯åˆ¤
  - **Phase 1: éœ€æ±‚æ¾„æ¸…**ï¼ˆæé—®ç”¨æˆ·ï¼‰
    - ä»»åŠ¡èƒŒæ™¯å’Œç›®æ ‡
    - æŠ€æœ¯æ ˆå’Œç¯å¢ƒ
    - é¢„æœŸäº¤ä»˜ç‰©
    - æ—¶é—´é¢„æœŸ
  - **Phase 2: è®¡åˆ’ç»“æ„è®¾è®¡ + æ¶æ„åˆ¤æ–­**ï¼ˆç¡®è®¤é˜¶æ®µåˆ’åˆ†ï¼‰
    - ç”Ÿæˆé«˜å±‚æ¬¡Stageæ¦‚è¦ï¼ˆ3-8ä¸ªStageï¼‰
    - æ¯ä¸ªStageä¸€å¥è¯æè¿°å’Œé¢„è®¡è¡Œæ•°
    - **æ¶æ„åˆ¤æ–­**ï¼ˆå¦‚æœPhase 0æ˜¯autoæ¨¡å¼ï¼‰ï¼š
      - è®¡ç®—æ€»Stageæ•°å’Œé¢„è®¡æ€»è¡Œæ•°
      - åº”ç”¨åˆ¤æ–­è§„åˆ™ï¼š
        - **å•æ–‡ä»¶é€‚åˆ**ï¼šStageæ•°â‰¤3 ä¸” æ€»è¡Œæ•°<2500 ä¸” ä»»åŠ¡ç®€å•
        - **æ‹†åˆ†æ¶æ„é€‚åˆ**ï¼šStageæ•°>3 æˆ– æ€»è¡Œæ•°â‰¥2500 æˆ– ä»»åŠ¡å¤æ‚
      - å‘ç”¨æˆ·è¯´æ˜æ¨èæ¶æ„å’Œç†ç”±
      - è¯¢é—®ç”¨æˆ·ï¼š"1) æ¥å—æ¨è 2) å¼ºåˆ¶æ‹†åˆ† 3) å¼ºåˆ¶å•æ–‡ä»¶"
    - **å¦‚æœPhase 0å·²å¼ºåˆ¶æŒ‡å®šæ¶æ„**ï¼šç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€è¯¢é—®
    - ç”¨æˆ·ç¡®è®¤é€‰é¡¹ï¼š
      - âœ… ç¡®è®¤å¹¶ç»§ç»­ç”Ÿæˆè¯¦ç»†å†…å®¹
      - â™»ï¸  ä¿®æ”¹Stageåˆ’åˆ†ï¼ˆè¿”å›Phase 2é‡æ–°è®¾è®¡ï¼‰
      - âŒ å–æ¶ˆè®¡åˆ’ç”Ÿæˆ
  - **Phase 3: æ¶æ„ç”Ÿæˆ**ï¼ˆå…³é”®ï¼æ ¹æ®Phase 2å†³å®šçš„æ¶æ„ï¼‰
    - **å¦‚æœæ˜¯æ‹†åˆ†æ¶æ„**ï¼š
      - ç”Ÿæˆ `README.md`ï¼ˆ200-300è¡Œï¼‰ï¼š
        - AUTO-RUN-CONFIGé…ç½®å¤´ï¼ˆarchitecture: splitï¼‰
        - ä»»åŠ¡æ¦‚è§ˆ
        - èƒŒæ™¯å’Œç›®æ ‡
        - æ‰§è¡Œè§„åˆ™
        - **Stageç´¢å¼•**ï¼ˆæ¯ä¸ªStageä¸€è¡Œæ¦‚è¦+é“¾æ¥åˆ°è¯¦ç»†æ–‡ä»¶ï¼‰
      - é€ä¸ªç”Ÿæˆ `stages/0X-stage-name.md`ï¼ˆ600-1000è¡Œ/ä¸ªï¼‰ï¼š
        - ç›®æ ‡
        - ä»»åŠ¡æ¸…å•ï¼ˆè¯¦ç»†çš„å­ä»»åŠ¡ï¼‰
        - å®Œæˆæ ‡å‡†
        - é¢„æœŸè¾“å‡º
        - æ³¨æ„äº‹é¡¹
        - éªŒè¯å‘½ä»¤
    - **å¦‚æœæ˜¯å•æ–‡ä»¶æ¶æ„**ï¼š
      - ç”Ÿæˆå•ä¸ª `task-name.md`ï¼ˆ1500-3000è¡Œï¼‰ï¼š
        - AUTO-RUN-CONFIGé…ç½®å¤´ï¼ˆarchitecture: singleï¼‰
        - ä»»åŠ¡æ¦‚è§ˆ
        - èƒŒæ™¯å’Œç›®æ ‡
        - æ‰§è¡Œè§„åˆ™
        - æ‰€æœ‰Stageçš„è¯¦ç»†å†…å®¹ï¼ˆåœ¨åŒä¸€æ–‡ä»¶å†…ï¼‰
        - æ¯ä¸ªStageåŒ…å«ï¼šç›®æ ‡ã€ä»»åŠ¡æ¸…å•ã€å®Œæˆæ ‡å‡†ç­‰
  - **Phase 4: è‡ªæˆ‘Review**ï¼ˆæ£€æŸ¥ç–æ¼å’Œè¿‡åº¦è®¾è®¡ï¼‰
    - æ£€æŸ¥Stageåˆ’åˆ†æ˜¯å¦åˆç†
    - æ£€æŸ¥ä»»åŠ¡æ˜¯å¦æœ‰é—æ¼
    - æ£€æŸ¥æ˜¯å¦è¿‡åº¦è®¾è®¡
    - æ£€æŸ¥Tokenæ•ˆç‡ï¼ˆå•ä¸ªStageæ˜¯å¦>1500 tokensï¼‰
  - **Phase 5: ä¿å­˜æ–‡ä»¶**ï¼ˆæ ¹æ®æ¶æ„ç±»å‹ï¼‰
    - **æ–‡ä»¶å†™å…¥å®ç°**ï¼š
      - æç¤ºè¯ä¸­æ˜ç¡®æŒ‡ç¤ºAIä½¿ç”¨Writeå·¥å…·
      - **æ‹†åˆ†æ¶æ„**ï¼š
        - åˆ›å»ºç›®å½•ï¼š`mkdir -p .ccautorun/plans/task-name/stages`
        - ä½¿ç”¨Writeå·¥å…·å†™å…¥README.md
        - ä¾æ¬¡å†™å…¥å„stageæ–‡ä»¶åˆ°stages/ç›®å½•
      - **å•æ–‡ä»¶æ¶æ„**ï¼š
        - ç¡®ä¿ç›®å½•å­˜åœ¨ï¼š`mkdir -p .ccautorun/plans`
        - ä½¿ç”¨Writeå·¥å…·å†™å…¥å•ä¸ª `task-name.md`
      - åŒ…å«é”™è¯¯å¤„ç†ï¼ˆç›®å½•å·²å­˜åœ¨ã€æƒé™ä¸è¶³ã€ç£ç›˜ç©ºé—´ç­‰ï¼‰
      - æ¯ä¸ªæ–‡ä»¶å†™å…¥åç¡®è®¤æˆåŠŸ
  - **Phase 6: éªŒè¯è®¡åˆ’**ï¼ˆå…³é”®ï¼ç¡®ä¿è®¡åˆ’è´¨é‡ï¼‰
    - æç¤ºè¯æŒ‡ç¤º AI è°ƒç”¨ `ccautorun validate <task-name>` å‘½ä»¤
    - éªŒè¯è®¡åˆ’æ–‡æ¡£æ ¼å¼ï¼š
      - é…ç½®å¤´æ˜¯å¦å®Œæ•´
      - Stage æ–‡ä»¶å‘½åæ˜¯å¦è§„èŒƒ
      - æ–‡ä»¶å†…å®¹ç»“æ„æ˜¯å¦å®Œæ•´
    - Token æ•ˆç‡æ£€æŸ¥ï¼š
      - æ‹†åˆ†æ¶æ„ï¼šå•ä¸ª Stage < 1500 tokens
      - å•æ–‡ä»¶ï¼šæ€»è®¡ < 5000 tokens
    - å¦‚æœéªŒè¯å¤±è´¥ï¼š
      - æ˜¾ç¤ºå…·ä½“é—®é¢˜å’Œå»ºè®®
      - è¯¢é—®ç”¨æˆ·æ˜¯å¦ä¿®å¤ï¼ˆè¿”å› Phase 3 æˆ– 4 é‡æ–°ç”Ÿæˆï¼‰
    - å¦‚æœéªŒè¯é€šè¿‡ï¼š
      - æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
      - æç¤ºç”¨æˆ·å¯ä»¥å¼€å§‹æ‰§è¡Œï¼š`claude "@<task>/<stage-01>.md" å¼€å§‹æ‰§è¡Œ`
- [ ] è®¾è®¡æ‹†åˆ†æ¶æ„æ¨¡æ¿
  - **README.mdæ¨¡æ¿**ï¼ˆè°ƒåº¦æ–‡æ¡£ï¼‰
  - **Stageè¯¦ç»†æ–‡æ¡£æ¨¡æ¿**ï¼ˆè¯¦ç»†è®¾è®¡ï¼‰
  - ä¸¤è€…æ ¼å¼è¦ç»Ÿä¸€ä¸”æ¸…æ™°
- [ ] ä¼˜åŒ–æç¤ºè¯ï¼Œç¡®ä¿AIï¼š
  - å¿…é¡»è¯¢é—®ä¸ç¡®å®šçš„ç‚¹ï¼ˆä¸èƒ½å‡è®¾ï¼‰
  - å¿…é¡»è®©ç”¨æˆ·ç¡®è®¤é˜¶æ®µç»“æ„ï¼ˆä¸èƒ½ç›´æ¥ç”Ÿæˆï¼‰
  - å¿…é¡»åšè‡ªæˆ‘Reviewï¼ˆä¸èƒ½æ•·è¡ï¼‰
  - å¿…é¡»æŒ‡å‡ºå‘ç°çš„é—®é¢˜ï¼ˆè¯šå®åé¦ˆï¼‰
  - **å¿…é¡»ç”Ÿæˆæ‹†åˆ†æ¶æ„**ï¼ˆä¸æ˜¯å•æ–‡ä»¶ï¼‰
- [ ] æ”¯æŒå¤šç§è¾“å…¥æ–¹å¼ï¼š
  - çº¯æ–‡æœ¬æè¿°ï¼š`/plan æˆ‘è¦é‡æ„authæ¨¡å—`
  - @æ–‡æ¡£å¼•ç”¨ï¼š`/plan @docs/prd.md æ ¹æ®è¿™ä¸ªPRDç”Ÿæˆè®¡åˆ’`
  - ä½¿ç”¨æ¨¡æ¿ï¼š`/plan --template refactor é‡æ„authæ¨¡å—`
  - æ··åˆæ–¹å¼
- [ ] å®ç°æ™ºèƒ½ä»»åŠ¡åç”Ÿæˆ
  - ä»ä»»åŠ¡æè¿°æå–å…³é”®è¯
  - ç”Ÿæˆkebab-caseç›®å½•å
  - æ£€æŸ¥ç›®å½•æ˜¯å¦å·²å­˜åœ¨

#### 4.2 æ¨¡æ¿ç³»ç»Ÿï¼ˆSlash Command å®ç°ï¼‰
- [ ] åˆ›å»º `.claude/commands/plan-with-template.md`ï¼ˆæˆ–é›†æˆåˆ° plan.mdï¼‰
  - åˆ—å‡ºå¯ç”¨æ¨¡æ¿
  - åŠ è½½æŒ‡å®šæ¨¡æ¿
  - åŸºäºæ¨¡æ¿ç”Ÿæˆè®¡åˆ’ï¼ˆé¢„å¡«å……ç»“æ„ï¼‰
- [ ] åˆ›å»ºæ¨¡æ¿ç›®å½• `templates/`
  - `templates/refactor.yaml` - é‡æ„ä»»åŠ¡æ¨¡æ¿
  - `templates/feature.yaml` - æ–°åŠŸèƒ½å¼€å‘æ¨¡æ¿
  - `templates/bugfix.yaml` - Bugä¿®å¤æ¨¡æ¿
  - `templates/docs.yaml` - æ–‡æ¡£ç”Ÿæˆæ¨¡æ¿
- [ ] æ¨¡æ¿æ ¼å¼ï¼š
  ```yaml
  name: refactor
  description: Refactor existing code
  architecture: split  # æ¨èæ¶æ„
  stages:
    - name: Analysis
      description: Analyze current code and identify issues
      estimated_lines: 800
    - name: Design
      description: Design refactoring approach
      estimated_lines: 900
    - name: Implementation
      description: Implement refactoring changes
      estimated_lines: 1000
  prompts:
    - "What modules need refactoring?"
    - "What are the main pain points?"
    - "What's the desired architecture?"
  ```
- [ ] å®ç°æ¨¡æ¿åº”ç”¨é€»è¾‘ï¼ˆåœ¨ slash command ä¸­ï¼‰
  - è¯»å–æ¨¡æ¿æ–‡ä»¶
  - æ ¹æ®æ¨¡æ¿é¢„å¡«å…… Stage ç»“æ„
  - AI åŸºäºæ¨¡æ¿è¿›è¡Œç»†åŒ–ï¼ˆä¸æ˜¯ä»é›¶å¼€å§‹ï¼‰
  - ä»ç„¶ç»è¿‡ç¡®è®¤å’Œ Review ç¯èŠ‚

### âœ… å®Œæˆæ ‡å‡†
- [ ] `/plan` å‘½ä»¤å¯ä»¥æ­£å¸¸è°ƒç”¨ï¼Œæ”¯æŒæ¶æ„å‚æ•°å’Œæ¨¡æ¿
- [ ] **Phase 0å‚æ•°è§£ææ­£ç¡®**ï¼šç›´æ¥åœ¨ slash command ä¸­è§£æ
- [ ] å¦‚æœæœªæŒ‡å®šå‚æ•°ï¼Œä»config.yamlè¯»å–default_architectureï¼ˆä½¿ç”¨ Read å·¥å…·ï¼‰
- [ ] AIä¼šä¸»åŠ¨æé—®æ¾„æ¸…éœ€æ±‚ï¼ˆè‡³å°‘3ä¸ªé—®é¢˜ï¼‰
- [ ] **Phase 2æ¶æ„åˆ¤æ–­é€»è¾‘æ­£ç¡®**ï¼ˆautoæ¨¡å¼ï¼‰ï¼š
  - èƒ½æ ¹æ®Stageæ•°å’Œè¡Œæ•°æ¨èæ¶æ„
  - å‘ç”¨æˆ·è¯´æ˜æ¨èç†ç”±
  - è¯¢é—®ç”¨æˆ·ç¡®è®¤æˆ–ä¿®æ”¹
- [ ] **å¼ºåˆ¶æ¨¡å¼ç›´æ¥ä½¿ç”¨æŒ‡å®šæ¶æ„**ï¼Œæ— éœ€è¯¢é—®
- [ ] **æ¨¡æ¿ç³»ç»Ÿå·¥ä½œæ­£å¸¸**ï¼š
  - `/plan --template refactor` å¯ä»¥åŠ è½½æ¨¡æ¿
  - AI åŸºäºæ¨¡æ¿é¢„å¡«å…… Stage ç»“æ„
  - ä»ç»è¿‡ç¡®è®¤å’Œ Review
- [ ] AIä¼šè®©ç”¨æˆ·ç¡®è®¤Stageç»“æ„åå†ç”Ÿæˆè¯¦ç»†å†…å®¹
- [ ] AIä¼šåšè‡ªæˆ‘Reviewå¹¶æŒ‡å‡ºè‡³å°‘1ä¸ªæ½œåœ¨é—®é¢˜
- [ ] **æ‹†åˆ†æ¶æ„ç”Ÿæˆæ­£ç¡®**ï¼š`task-name/README.md` + `stages/0X-*.md`
- [ ] **å•æ–‡ä»¶æ¶æ„ç”Ÿæˆæ­£ç¡®**ï¼š`task-name.md`ï¼ˆåŒ…å«æ‰€æœ‰Stageï¼‰
- [ ] é…ç½®å¤´åŒ…å«æ­£ç¡®çš„architectureå­—æ®µï¼ˆsplit/singleï¼‰
- [ ] æ¯ä¸ªæ–‡ä»¶æ ¼å¼å®Œå…¨ç¬¦åˆæ¨¡æ¿
- [ ] Stageæ–‡ä»¶å‘½åè§„èŒƒï¼š`01-stage-name.md`, `02-next-stage.md`
- [ ] æ”¯æŒ@æ–‡æ¡£å¼•ç”¨
- [ ] ä»»åŠ¡åè‡ªåŠ¨ç”Ÿæˆä¸”åˆç†
- [ ] **Phase 6 éªŒè¯è®¡åˆ’**ï¼š
  - AI ä¼šè°ƒç”¨ `ccautorun validate` å‘½ä»¤
  - éªŒè¯é…ç½®å¤´ã€æ–‡ä»¶å‘½åã€å†…å®¹ç»“æ„
  - éªŒè¯ Token æ•ˆç‡
  - éªŒè¯å¤±è´¥æ—¶æç¤ºç”¨æˆ·ä¿®å¤
  - éªŒè¯é€šè¿‡åæç¤ºç”¨æˆ·å¦‚ä½•å¼€å§‹æ‰§è¡Œ

### ğŸ“¤ é¢„æœŸè¾“å‡º
- [ ] `.claude/commands/plan.md` (1400-1600è¡Œï¼Œç›´æ¥å¤„ç†å‚æ•°å’Œæ¨¡æ¿ï¼Œå¢åŠ  Phase 6 éªŒè¯ï¼‰
- [ ] `templates/plan-templates/` ç›®å½•ï¼š
  - `refactor.yaml` - é‡æ„æ¨¡æ¿
  - `feature.yaml` - æ–°åŠŸèƒ½æ¨¡æ¿
  - `bugfix.yaml` - Bugä¿®å¤æ¨¡æ¿
  - `docs.yaml` - æ–‡æ¡£ç”Ÿæˆæ¨¡æ¿
- [ ] `templates/split-plan/README.md` (æ‹†åˆ†æ¶æ„READMEæ¨¡æ¿)
- [ ] `templates/split-plan/stages/01-example.md` (æ‹†åˆ†æ¶æ„Stageæ¨¡æ¿)
- [ ] `templates/single-plan.md` (å•æ–‡ä»¶æ¶æ„æ¨¡æ¿)
- [ ] `examples/` ç›®å½•ä¸‹3ä¸ªç¤ºä¾‹ï¼ˆ2æ‹†åˆ†+1å•æ–‡ä»¶ï¼‰
  - `refactor-auth/` - è®¤è¯æ¨¡å—é‡æ„ï¼ˆæ‹†åˆ†æ¶æ„ï¼Œ5 stagesï¼‰
  - `api-documentation/` - APIæ–‡æ¡£ç”Ÿæˆï¼ˆæ‹†åˆ†æ¶æ„ï¼Œ3 stagesï¼‰
  - `config-update.md` - é…ç½®æ–‡ä»¶æ›´æ–°ï¼ˆå•æ–‡ä»¶æ¶æ„ï¼Œ2 stagesï¼‰
  - åç»­æ ¹æ®ç”¨æˆ·åé¦ˆå†æ·»åŠ æ›´å¤šç¤ºä¾‹ï¼ˆv2.0.1+ï¼‰

### âš ï¸ æ³¨æ„äº‹é¡¹
- **å‚æ•°è§£æç›´æ¥åœ¨ slash command ä¸­**ï¼š
  - ä½¿ç”¨ç®€å•çš„å­—ç¬¦ä¸²åŒ¹é…è§£æå‚æ•°
  - æä¾›ç»™ AI æ˜ç¡®çš„å‚æ•°å€¼ï¼Œé¿å… AI è¯¯åˆ¤æˆ–å¿½ç•¥å‚æ•°
  - å¦‚æœè§£æå¤±è´¥ï¼Œç»™å‡ºæ¸…æ™°çš„é”™è¯¯æç¤º
- **æ¶æ„é€‰æ‹©å‚æ•°**ï¼š
  - Phase 0 ç›´æ¥è§£æç”¨æˆ·è¾“å…¥
  - ä½¿ç”¨ Read å·¥å…·è¯»å– config.yaml è·å–é»˜è®¤æ¶æ„
  - autoæ¨¡å¼çš„åˆ¤æ–­é€»è¾‘è¦æ¸…æ™°ï¼Œå‘ç”¨æˆ·è§£é‡Šæ¨èç†ç”±
- **Phase 6 éªŒè¯è‡³å…³é‡è¦**ï¼š
  - å¿…é¡»è°ƒç”¨ `ccautorun validate` å‘½ä»¤
  - éªŒè¯å¤±è´¥æ—¶ç»™å‡ºå…·ä½“å»ºè®®
  - æç¤ºç”¨æˆ·å¦‚ä½•å¼€å§‹æ‰§è¡Œ
- **æ¨¡æ¿ç³»ç»Ÿè®¾è®¡**ï¼š
  - æ¨¡æ¿æ˜¯è¾…åŠ©ï¼Œä¸æ˜¯å®Œå…¨æ›¿ä»£ AI ç”Ÿæˆ
  - AI ä»éœ€è¦è¯¢é—®ã€ç¡®è®¤ã€Review
  - æ¨¡æ¿æ ¼å¼è¦ç®€å•ï¼Œæ˜“äºç”¨æˆ·è‡ªå®šä¹‰
- **åŒæ¶æ„æ”¯æŒ**ï¼šæç¤ºè¯å¿…é¡»åŒ…å«ä¸¤å¥—ç”Ÿæˆæ¨¡æ¿ï¼ˆæ‹†åˆ†å’Œå•æ–‡ä»¶ï¼‰
- æç¤ºè¯è®¾è®¡æ˜¯æˆè´¥å…³é”®ï¼Œéœ€è¦åå¤æµ‹è¯•ä¼˜åŒ–
- AIçš„Reviewç¯èŠ‚å¿…é¡»ä¸¥æ ¼ï¼Œä¸èƒ½æ•·è¡
- æ–‡ä»¶æ ¼å¼è¦ç²¾ç¡®ï¼Œå› ä¸ºplan-parserä¾èµ–å®ƒ
- **æ–‡ä»¶å‘½åè§„èŒƒä¸¥æ ¼**ï¼š
  - æ‹†åˆ†æ¶æ„ï¼š`task-name/README.md` + `stages/01-name.md`
  - å•æ–‡ä»¶ï¼š`task-name.md`
- Stageæ•°é‡å»ºè®®3-8ä¸ªï¼ˆå¤ªå¤šä¼šå¢åŠ ç®¡ç†è´Ÿæ‹…ï¼‰
- **è¡Œæ•°å»ºè®®**ï¼š
  - æ‹†åˆ†æ¶æ„ï¼šæ¯ä¸ªStage 600-1000è¡Œï¼ˆtokençº¦900-1500ï¼‰
  - å•æ–‡ä»¶æ¶æ„ï¼šæ€»è®¡1500-3000è¡Œï¼ˆé€‚åˆç®€å•ä»»åŠ¡ï¼‰
- ç¤ºä¾‹è¦çœŸå®ã€é«˜è´¨é‡ï¼Œä½œä¸ºAIå­¦ä¹ çš„èŒƒæœ¬
- æ”¯æŒä¸­æ–‡å’Œè‹±æ–‡è¾“å…¥
- **Phase 3æ™ºèƒ½ç”Ÿæˆç­–ç•¥**ï¼š
  - å•æ–‡ä»¶æ¶æ„ï¼šç›´æ¥ä¸€æ¬¡æ€§ç”Ÿæˆï¼ˆé€šå¸¸ä¸è¶…è¿‡3000è¡Œï¼‰
  - æ‹†åˆ†æ¶æ„ï¼šå¦‚æœStageæ•°â‰¤3å¯ä¸€æ¬¡ç”Ÿæˆï¼Œå¦åˆ™é€ä¸ªç”Ÿæˆ
  - æ¯ç”Ÿæˆä¸€ä¸ªStageåï¼Œè¯¢é—®ç”¨æˆ·æ˜¯å¦ç»§ç»­æˆ–è°ƒæ•´

### ğŸ§ª éªŒè¯å‘½ä»¤
```bash
# æµ‹è¯•é¢„å¤„ç†å™¨
node -e "import('./src/commands/plan-preprocessor.js').then(m => {
  console.log(m.preprocess('/plan --force-split test task'));
})"
# åº”è¾“å‡º: { architecture: 'split', taskDesc: 'test task' }

# æµ‹è¯•æ¨¡æ¿åŠ è½½
ls templates/plan-templates/
# åº”æ˜¾ç¤º: refactor.yaml, feature.yaml, bugfix.yaml, docs.yaml

# åœ¨Claude Codeä¸­æµ‹è¯• - è‡ªåŠ¨åˆ¤æ–­æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
/plan æˆ‘è¦é‡æ„authæ¨¡å—ï¼Œæ”¯æŒOAuth2.0
# AIåº”è¯¥åˆ†æä»»åŠ¡å¤æ‚åº¦å¹¶æ¨èæ¶æ„

# æµ‹è¯•å¼ºåˆ¶æ‹†åˆ†æ¶æ„
/plan --force-split ç®€å•çš„é…ç½®æ–‡ä»¶æ›´æ–°
# å³ä½¿ä»»åŠ¡ç®€å•ï¼Œä¹Ÿåº”ç”Ÿæˆæ‹†åˆ†æ¶æ„

# æµ‹è¯•å¼ºåˆ¶å•æ–‡ä»¶æ¶æ„
/plan --force-single é‡æ„æ•´ä¸ªè®¤è¯ç³»ç»Ÿ
# å³ä½¿ä»»åŠ¡å¤æ‚ï¼Œä¹Ÿåº”ç”Ÿæˆå•æ–‡ä»¶

# æµ‹è¯•æ¨¡æ¿
/plan --template refactor é‡æ„authæ¨¡å—
# åº”åŠ è½½ refactor æ¨¡æ¿å¹¶åŸºäºå®ƒç”Ÿæˆ

# æµ‹è¯•é•¿æ ¼å¼å‚æ•°
/plan --architecture split æ·»åŠ æ–°çš„APIç«¯ç‚¹

# æµ‹è¯•æ–‡æ¡£å¼•ç”¨
/plan @docs/requirements.md --force-split ç”Ÿæˆæ‰§è¡Œè®¡åˆ’

# éªŒè¯æ‹†åˆ†æ¶æ„è¾“å‡º
tree .ccautorun/plans/auth-oauth2-refactor/
# åº”è¾“å‡º:
# auth-oauth2-refactor/
# â”œâ”€â”€ README.md
# â””â”€â”€ stages/
#     â”œâ”€â”€ 01-database-design.md
#     â”œâ”€â”€ 02-api-implementation.md
#     â””â”€â”€ ...

# éªŒè¯å•æ–‡ä»¶æ¶æ„è¾“å‡º
ls .ccautorun/plans/config-update.md
# åº”å­˜åœ¨å•ä¸ªæ–‡ä»¶

# éªŒè¯README.mdæ ¼å¼ï¼ˆæ‹†åˆ†æ¶æ„ï¼‰
head -20 .ccautorun/plans/auth-oauth2-refactor/README.md
# åº”åŒ…å« AUTO-RUN-CONFIG å’Œ architecture: split

# éªŒè¯å•æ–‡ä»¶æ ¼å¼
head -20 .ccautorun/plans/config-update.md
# åº”åŒ…å« AUTO-RUN-CONFIG å’Œ architecture: single

# éªŒè¯plan-parserå¯ä»¥è§£æä¸¤ç§æ¶æ„
ccautorun status auth-oauth2-refactor
# åº”æ˜¾ç¤ºæ¶æ„ç±»å‹ï¼šsplit
ccautorun status config-update
# åº”æ˜¾ç¤ºæ¶æ„ç±»å‹ï¼šsingle

# éªŒè¯tokenæ•ˆç‡
wc -l .ccautorun/plans/auth-oauth2-refactor/stages/*.md
# æ¯ä¸ªæ–‡ä»¶åº”åœ¨600-1000è¡Œä¹‹é—´
wc -l .ccautorun/plans/config-update.md
# å•æ–‡ä»¶åº”åœ¨1500-3000è¡Œä¹‹é—´
```

---

